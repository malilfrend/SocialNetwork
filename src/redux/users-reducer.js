import {usersAPI} from "../api/api";const FOLLOW = 'FOLLOW'const UNFOLLOW = 'UNFOLLOW'const SET_USERS = 'SET-USERS'const SET_CURRENT_PAGE = 'SET-CURRENT-PAGE'const SET_TOTAL_USERS_COUNT = 'SET-TOTAL-USERS-COUNT'const SET_USER_STATUS = 'SET_USER_STATUS'const TOGGLE_IS_FETCHING = 'TOGGLE-IS-FETCHING'const TOGGLE_IS_FOLLOWING_IN_PROGRESS = 'TOGGLE-IS-FOLLOWING-IN-PROGRESS'let initialState = {	usersData: [		],	pageSize: 20,	totalUsersCount: 0,	currentPage: 1,	isFetching: false,	followingInProgress: [],}const usersReducer = (state = initialState, action) => {		switch (action.type) {		case FOLLOW:			return {				...state,				usersData: state.usersData.map(user => {					if (user.id === action.userId) {						return {...user, followed: true}					}					return user				}),			}		case UNFOLLOW:			return {				...state,				usersData: state.usersData.map(user => {					if (user.id === action.userId) {						return {...user, followed: false}					}					return user				})			}		case SET_USERS:			return {				...state,				usersData: action.users			}		case SET_CURRENT_PAGE:			return {				...state,				currentPage: action.currentPage			}		case SET_TOTAL_USERS_COUNT:			return {				...state,				totalUsersCount: action.totalUsersCount			}		case TOGGLE_IS_FETCHING:			return {				...state,				isFetching: action.isFetching			}		case TOGGLE_IS_FOLLOWING_IN_PROGRESS:			return {				...state,				followingInProgress: action.isFetching					? [...state.followingInProgress, action.userId]					: state.followingInProgress.filter(id => id != action.userId)			}		default:			return state	}}const followSuccess = (userId) => {	return {		type: FOLLOW,		userId	}}const unfollowSuccess = (userId) => {	return {		type: UNFOLLOW,		userId	}}const setUsers = (users) => {	return {		type: SET_USERS,		users	}}const setCurrentPage = (currentPage) => {	return {		type: SET_CURRENT_PAGE,		currentPage	}}const setTotalUsersCount = (totalUsersCount) => {	return {		type: SET_TOTAL_USERS_COUNT,		totalUsersCount	}}// const setUserStatus = (status) => {// 	return {// 		type: SET_USER_STATUS,// 		status// 	}// }const toggleIsFetching = (isFetching) => {	return {		type: TOGGLE_IS_FETCHING,		isFetching	}}const toggleIsFollowingInProgress = (isFetching, userId) => {	return {		type: TOGGLE_IS_FOLLOWING_IN_PROGRESS,		isFetching,		userId	}}// const getUserStatus = (userId) => {// 	return (// 		(dispatch) => {// 			usersAPI.getUserStatus(userId).then(data =>{// 				dispatch()// 			})// 		}// 	)// }const requestUsers = (currentPage, pageSize) => {	return (		(dispatch) => {			dispatch(toggleIsFetching(true))			usersAPI.getUsers(currentPage, pageSize).then(data => {				dispatch(setUsers(data.items))				dispatch(setTotalUsersCount(data.totalCount))				dispatch(toggleIsFetching(false))			})		}	)}const follow = (userId) => {	return (		(dispatch) => {			dispatch(toggleIsFollowingInProgress(true, userId))			usersAPI.follow(userId).then(data => {				if (data.resultCode === 0) {					dispatch(followSuccess(userId))				}				dispatch(toggleIsFollowingInProgress(false, userId))			})		}	)}const unfollow = (userId) => {	return (		(dispatch) => {			dispatch(toggleIsFollowingInProgress(true, userId))			usersAPI.unfollow(userId).then(data => {				if (data.resultCode === 0) {					dispatch(unfollowSuccess(userId))				}				dispatch(toggleIsFollowingInProgress(false, userId))			})		}	)}// actionCreatorsexport {	usersReducer,	followSuccess,	unfollowSuccess,	setUsers,	setCurrentPage,	setTotalUsersCount,	toggleIsFetching,	toggleIsFollowingInProgress,}// thunkCreatorsexport {	requestUsers,	follow,	unfollow}